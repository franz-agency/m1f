#!/usr/bin/env bash
# m1f - Make One File

# Save current directory
ORIGINAL_DIR="$(pwd)"

# Get the real path of this script
SCRIPT_PATH="$(readlink -f "$0" 2>/dev/null || realpath "$0" 2>/dev/null || echo "$0")"
BIN_DIR="$(dirname "$SCRIPT_PATH")"
PROJECT_ROOT="$(dirname "$BIN_DIR")"

# Activate virtual environment
source "$PROJECT_ROOT/.venv/bin/activate"

# Add project root to PYTHONPATH so tools module can be found
export PYTHONPATH="$PROJECT_ROOT:$PYTHONPATH"

# Execute m1f from project root (m1f handles file path resolution internally)
cd "$PROJECT_ROOT"
exec python -m tools.m1f "$@"
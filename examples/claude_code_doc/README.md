# Claude Code Documentation Scraper

Creates a bundled documentation file from the Claude Code documentation website.

## What it does

1. **Scrapes** ~31 HTML pages from docs.anthropic.com/claude-code
2. **Analyzes** HTML structure using Claude AI (or uses existing config)
3. **Converts** HTML to clean Markdown with parallel processing
4. **Creates** documentation bundle using m1f-init

## Usage

**Important**: Run from the m1f project root with virtual environment activated!

### Basic usage (with Claude analysis)
```bash
# From m1f project root:
source .venv/bin/activate
python examples/claude_code_doc/scrape_claude_code_docs.py ~/claude-docs
```

### Fast mode (skip Claude analysis)
```bash
# From m1f project root - saves 5-8 minutes!
source .venv/bin/activate
python examples/claude_code_doc/scrape_claude_code_docs.py ~/claude-docs \
    --use-config examples/claude_code_doc/html2md_claude_code_doc.config.yml
```

### Force re-download
```bash
# Re-download HTML files even if they exist
source .venv/bin/activate
python examples/claude_code_doc/scrape_claude_code_docs.py ~/claude-docs --force-download
```

## Timing

### Full process (with Claude analysis)
⏱️ **Total: ~18 minutes**
- Scraping: 8 minutes (31 pages with 15s delays)
- Claude analysis: 5-8 minutes
- Conversion & bundling: <2 minutes

### Fast mode (using existing config)
⏱️ **Total: ~10 minutes**
- Scraping: 8 minutes (31 pages with 15s delays)
- ~~Claude analysis: SKIPPED~~
- Conversion & bundling: <1 minute

### With existing HTML files + config
⏱️ **Total: ~1-2 minutes**
- ~~Scraping: SKIPPED~~
- ~~Claude analysis: SKIPPED~~
- Conversion & bundling: <1 minute

## Logging

### Capture output to file
```bash
# Basic logging (from project root)
source .venv/bin/activate
python examples/claude_code_doc/scrape_claude_code_docs.py ~/claude-docs 2>&1 | tee scrape_log.txt

# With timestamps (requires moreutils)
source .venv/bin/activate
python examples/claude_code_doc/scrape_claude_code_docs.py ~/claude-docs 2>&1 | \
    ts '[%Y-%m-%d %H:%M:%S]' | tee scrape_log.txt
```

### Full process with logging (recommended)
```bash
# From m1f project root
cd /path/to/m1f

# Create output directory
mkdir -p ~/claude-code-doc

# Activate virtual environment and run with logging
source .venv/bin/activate && \
python examples/claude_code_doc/scrape_claude_code_docs.py ~/claude-code-doc \
    --use-config examples/claude_code_doc/html2md_claude_code_doc.config.yml \
    2>&1 | tee ~/claude-code-doc/scrape_$(date +%Y%m%d_%H%M%S).log
```

## Output

The script creates:
```
<target_directory>/
├── claude-code-html/           # Downloaded HTML files
├── claude-code-markdown/       # Converted Markdown files
│   └── m1f/
│       └── *_docs.txt         # Final documentation bundle
└── html2md_claude_code_doc.config.yml  # Config (if generated by Claude)
```

### Using the bundle
```bash
# Create a symlink
ln -s ~/claude-code-doc/claude-code-markdown/m1f/*_docs.txt ~/claude-code-docs.txt

# Copy to another location
cp ~/claude-code-doc/claude-code-markdown/m1f/*_docs.txt /path/to/destination/

# Use with Claude
m1f-claude ~/claude-code-doc/claude-code-markdown/m1f/*_docs.txt
```

## Configuration

The included `html2md_claude_code_doc.config.yml` file contains optimized selectors for Claude Code documentation:
- Extracts main content from `div.max-w-8xl.px-4.mx-auto`
- Removes navigation, sidebars, search UI, and other non-content elements
- Preserves code blocks and formatting

## Options

- `--use-config CONFIG_FILE`: Use existing config (skip Claude analysis)
- `--force-download`: Re-download HTML files even if they exist
- `--delay SECONDS`: Delay between requests (default: 15)
- `--parallel`: Enable parallel HTML conversion (default: enabled)

## Requirements

- Python 3.10+
- m1f toolkit installed (`pip install -e .` from m1f root)
- Activated virtual environment (`.venv`)
- Internet connection
- Claude API access (unless using --use-config)

## Notes

- The scraping delay is set to 15 seconds to be respectful of the server
- Always run from the m1f project root directory
- Make sure the virtual environment is activated before running
